<div class="app-shell">
  <header class="app-header">
    <div class="left">
      <span class="logo">TurboVets Tasker</span>
    </div>

    <div class="right" *ngIf="isLoggedIn; else loggedOut">
      <span class="user">
        {{ email }}
        <ng-container *ngIf="currentOrgRole">
          Â· Role: {{ currentOrgRole }}
        </ng-container>
      </span>

      <ng-container *ngIf="organizations?.length">
        <label class="org-label">
          Org:
          <select
            [value]="currentOrgId || ''"
            (change)="onOrgChange($event)"
          >
            <option
              *ngFor="let org of organizations"
              [value]="org.organizationId"
            >
              {{ org.organizationName }} ({{ org.role }})
            </option>
          </select>
        </label>
      </ng-container>

      <nav class="nav-links">
        <a routerLink="/tasks" routerLinkActive="active">Tasks</a>
        <a routerLink="/org-users" routerLinkActive="active">Org Users</a>
      </nav>

      <button class="logout-btn" (click)="logout()">Logout</button>
    </div>

    <ng-template #loggedOut>
      <div class="right">
        <a routerLink="/login">Login</a>
      </div>
    </ng-template>
  </header>

  <main class="app-main">
    <router-outlet></router-outlet>
  </main>
</div>
